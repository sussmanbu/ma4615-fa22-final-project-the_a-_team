---
title: blogpost2
author: The_A+_team
date: '2022-10-19'
slug: []
categories: []
tags: []
description: ~
toc: yes
authors: []
series: []
lastmod: '2022-10-19T14:13:57-04:00'
featuredVideo: ~
featuredImage: ~
---


<div id="TOC">

</div>

<p>install.packages(“dplyr”)</p>
<pre class="r"><code>library(tidyverse)</code></pre>
<pre><code>## ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.2 ──
## ✔ ggplot2 3.3.6      ✔ purrr   0.3.4 
## ✔ tibble  3.1.6      ✔ dplyr   1.0.10
## ✔ tidyr   1.2.0      ✔ stringr 1.4.0 
## ✔ readr   2.1.2      ✔ forcats 0.5.2 
## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
## ✖ dplyr::filter() masks stats::filter()
## ✖ dplyr::lag()    masks stats::lag()</code></pre>
<pre class="r"><code>electricity &lt;- read_csv(&quot;electricity.csv&quot;)</code></pre>
<pre><code>## New names:
## Rows: 57 Columns: 54
## ── Column specification
## ──────────────────────────────────────────────────────── Delimiter: &quot;,&quot; chr
## (3): Electricity Emissions by State (1970 - 2020), Change from 1970 - 20...
## ℹ Use `spec()` to retrieve the full column specification for this data. ℹ
## Specify the column types or set `show_col_types = FALSE` to quiet this message.
## • `` -&gt; `...2`
## • `` -&gt; `...3`
## • `` -&gt; `...4`
## • `` -&gt; `...5`
## • `` -&gt; `...6`
## • `` -&gt; `...7`
## • `` -&gt; `...8`
## • `` -&gt; `...9`
## • `` -&gt; `...10`
## • `` -&gt; `...11`
## • `` -&gt; `...12`
## • `` -&gt; `...13`
## • `` -&gt; `...14`
## • `` -&gt; `...15`
## • `` -&gt; `...16`
## • `` -&gt; `...17`
## • `` -&gt; `...18`
## • `` -&gt; `...19`
## • `` -&gt; `...20`
## • `` -&gt; `...21`
## • `` -&gt; `...22`
## • `` -&gt; `...23`
## • `` -&gt; `...24`
## • `` -&gt; `...25`
## • `` -&gt; `...26`
## • `` -&gt; `...27`
## • `` -&gt; `...28`
## • `` -&gt; `...29`
## • `` -&gt; `...30`
## • `` -&gt; `...31`
## • `` -&gt; `...32`
## • `` -&gt; `...33`
## • `` -&gt; `...34`
## • `` -&gt; `...35`
## • `` -&gt; `...36`
## • `` -&gt; `...37`
## • `` -&gt; `...38`
## • `` -&gt; `...39`
## • `` -&gt; `...40`
## • `` -&gt; `...41`
## • `` -&gt; `...42`
## • `` -&gt; `...43`
## • `` -&gt; `...44`
## • `` -&gt; `...45`
## • `` -&gt; `...46`
## • `` -&gt; `...47`
## • `` -&gt; `...48`
## • `` -&gt; `...49`
## • `` -&gt; `...50`
## • `` -&gt; `...51`
## • `` -&gt; `...52`
## • `` -&gt; `...54`</code></pre>
<pre class="r"><code>spec(electricity)</code></pre>
<pre><code>## cols(
##   `Electricity Emissions by State (1970 - 2020)` = col_character(),
##   ...2 = col_number(),
##   ...3 = col_number(),
##   ...4 = col_number(),
##   ...5 = col_number(),
##   ...6 = col_number(),
##   ...7 = col_number(),
##   ...8 = col_number(),
##   ...9 = col_number(),
##   ...10 = col_number(),
##   ...11 = col_number(),
##   ...12 = col_number(),
##   ...13 = col_number(),
##   ...14 = col_number(),
##   ...15 = col_number(),
##   ...16 = col_number(),
##   ...17 = col_number(),
##   ...18 = col_number(),
##   ...19 = col_number(),
##   ...20 = col_number(),
##   ...21 = col_number(),
##   ...22 = col_number(),
##   ...23 = col_number(),
##   ...24 = col_number(),
##   ...25 = col_number(),
##   ...26 = col_number(),
##   ...27 = col_number(),
##   ...28 = col_number(),
##   ...29 = col_number(),
##   ...30 = col_number(),
##   ...31 = col_number(),
##   ...32 = col_number(),
##   ...33 = col_number(),
##   ...34 = col_number(),
##   ...35 = col_number(),
##   ...36 = col_number(),
##   ...37 = col_number(),
##   ...38 = col_number(),
##   ...39 = col_number(),
##   ...40 = col_number(),
##   ...41 = col_number(),
##   ...42 = col_number(),
##   ...43 = col_number(),
##   ...44 = col_number(),
##   ...45 = col_number(),
##   ...46 = col_number(),
##   ...47 = col_number(),
##   ...48 = col_number(),
##   ...49 = col_number(),
##   ...50 = col_number(),
##   ...51 = col_number(),
##   ...52 = col_number(),
##   `Change from 1970 - 2020` = col_character(),
##   ...54 = col_character()
## )</code></pre>
<pre class="r"><code>electricity1 &lt;- electricity %&gt;% select(-(2:46),-(52:54))
electricity2 &lt;- electricity1[-c(1,55:57),] %&gt;% 
  rename (electricity_emission_by_state = `Electricity Emissions by State (1970 - 2020)`)
electricity2</code></pre>
<pre><code>## # A tibble: 53 × 6
##    electricity_emission_by_state  ...47  ...48  ...49  ...50  ...51
##    &lt;chr&gt;                          &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
##  1 State                         2015   2016   2017   2018   2019  
##  2 Alabama                         62.4   55.6   51     53.9   48.5
##  3 Alaska                           3      2.8    2.8    2.7    2.7
##  4 Arizona                         50     44.6   43.8   46.8   43.5
##  5 Arkansas                        27.3   30.5   32.1   37     31.2
##  6 California                      44.1   36.5   32.9   33.6   31.1
##  7 Colorado                        37     35.6   35.2   34.2   33.5
##  8 Connecticut                      7.4    7      6.3    8      7.9
##  9 Delaware                         3.3    3.6    2.9    2.6    1.8
## 10 District of Columbia             0      0      0      0      0  
## # … with 43 more rows</code></pre>
<p>After our group discussion, we decide to focus on the topic of the carbon dioxide (CO2) emission by electricity, transportation and agriculture in the United States. By evaluating the whole dataset, we think it is better to explore the relationship of CO2 emission in recent years, so we focus on data between 2015-2019. The electricty data set includes the CO2 emission of different states in the US from 1970-2020, I used <code>select</code> to clean up all the data besides 2015-2019, and rest of the data can be used for analyzation.</p>
<p>install.packages(“dplyr”)</p>
<pre class="r"><code>library(dplyr)
library(tidyverse)
air1 &lt;- read_csv(&quot;AIRTRANS_CO2.csv&quot;, show_col_types = FALSE) %&gt;% 
  filter(LOCATION == &quot;USA&quot;, values_drop_na = TRUE) %&gt;% 
  arrange(order(Time)) %&gt;% 
  select(-POLLUTANT, -MEASURE, -FLIGHT, -FREQUENCY, -SOURCE, -SEASONALITY, -TIME, -`Flag Codes`, -Flags) %&gt;% 
  filter(Time &gt; 2014 &amp; Time &lt; 2020) %&gt;% 
  rename(flight_type = `Flight type`, source_of_emissions = `Source of emissions`) %&gt;% 
  group_by(flight_type, source_of_emissions) %&gt;% 
  mutate(count = n()) %&gt;% 
  as_tibble(air1) %&gt;% 
  ungroup() 
air1</code></pre>
<pre><code>## # A tibble: 180 × 11
##    LOCATION Country  Pollutant  Measure flight_type Frequency source_of_emissio…
##    &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;      &lt;chr&gt;   &lt;chr&gt;       &lt;chr&gt;     &lt;chr&gt;             
##  1 USA      United … Carbon di… tonnes… All flights Annual    &quot;\&quot;(A) - Domestic…
##  2 USA      United … Carbon di… tonnes… All flights Annual    &quot;\&quot;(E) - Internat…
##  3 USA      United … Carbon di… tonnes… All flights Annual    &quot;Bridging item - …
##  4 USA      United … Carbon di… tonnes… Passenger … Annual    &quot;\&quot;(A) - Domestic…
##  5 USA      United … Carbon di… tonnes… Passenger … Annual    &quot;\&quot;(E) - Internat…
##  6 USA      United … Carbon di… tonnes… Passenger … Annual    &quot;Bridging item - …
##  7 USA      United … Carbon di… tonnes… Freight fl… Annual    &quot;\&quot;(A) - Domestic…
##  8 USA      United … Carbon di… tonnes… Freight fl… Annual    &quot;\&quot;(E) - Internat…
##  9 USA      United … Carbon di… tonnes… Freight fl… Annual    &quot;Bridging item - …
## 10 USA      United … Carbon di… tonnes… All flights Annual    &quot;\&quot;(A) - Domestic…
## # … with 170 more rows, and 4 more variables: Seasonality &lt;chr&gt;, Time &lt;chr&gt;,
## #   Value &lt;dbl&gt;, count &lt;int&gt;</code></pre>
<p>I am working on a large dataset because it includes data from all over the world. There are thousands of rows, but we only focus on the situation in the United States. Luckily, in the dataset that I found, there is no missing value. Only in the last two columns all of the values are NAs, so I used select() to remove both of them. Also, for every variable, two versions of data show up: one of them is abbreviated, and the other one is full name. Thus, I selected the one with the abbreviated name. As for flight type and source of emissions, since there are too many categories, I choose to group_by() both. Then, we can analyze data in more small subgroups. For example, we can analyze that in 2015, passenger flight which is domestic flights operated by a resident airline in USA.</p>
<pre class="r"><code>Agri &lt;- read_csv(&quot;FAOSTAT.csv&quot;) </code></pre>
<pre><code>## Rows: 33434 Columns: 68
## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: &quot;,&quot;
## chr  (5): Area, Item, Element, Source, Unit
## dbl (63): Area Code, Item Code, Element Code, Source Code, Y1961, Y1962, Y19...
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<pre class="r"><code>str(Agri)</code></pre>
<pre><code>## spec_tbl_df [33,434 × 68] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
##  $ Area Code   : num [1:33434] 2 2 2 2 2 2 2 2 2 2 ...
##  $ Area        : chr [1:33434] &quot;Afghanistan&quot; &quot;Afghanistan&quot; &quot;Afghanistan&quot; &quot;Afghanistan&quot; ...
##  $ Item Code   : num [1:33434] 5058 5058 5058 5058 5058 ...
##  $ Item        : chr [1:33434] &quot;Enteric Fermentation&quot; &quot;Enteric Fermentation&quot; &quot;Enteric Fermentation&quot; &quot;Enteric Fermentation&quot; ...
##  $ Element Code: num [1:33434] 7225 7225 724413 724413 723113 ...
##  $ Element     : chr [1:33434] &quot;Emissions (CH4)&quot; &quot;Emissions (CH4)&quot; &quot;Emissions (CO2eq) from CH4 (AR5)&quot; &quot;Emissions (CO2eq) from CH4 (AR5)&quot; ...
##  $ Source Code : num [1:33434] 3050 3051 3050 3051 3050 ...
##  $ Source      : chr [1:33434] &quot;FAO TIER 1&quot; &quot;UNFCCC&quot; &quot;FAO TIER 1&quot; &quot;UNFCCC&quot; ...
##  $ Unit        : chr [1:33434] &quot;kilotonnes&quot; &quot;kilotonnes&quot; &quot;kilotonnes&quot; &quot;kilotonnes&quot; ...
##  $ Y1961       : num [1:33434] 241 NA 6739 NA 6739 ...
##  $ Y1962       : num [1:33434] 245 NA 6869 NA 6869 ...
##  $ Y1963       : num [1:33434] 256 NA 7163 NA 7163 ...
##  $ Y1964       : num [1:33434] 259 NA 7254 NA 7254 ...
##  $ Y1965       : num [1:33434] 266 NA 7437 NA 7437 ...
##  $ Y1966       : num [1:33434] 277 NA 7756 NA 7756 ...
##  $ Y1967       : num [1:33434] 280 NA 7843 NA 7843 ...
##  $ Y1968       : num [1:33434] 289 NA 8087 NA 8087 ...
##  $ Y1969       : num [1:33434] 286 NA 8019 NA 8019 ...
##  $ Y1970       : num [1:33434] 290 NA 8127 NA 8127 ...
##  $ Y1971       : num [1:33434] 288 NA 8058 NA 8058 ...
##  $ Y1972       : num [1:33434] 232 NA 6483 NA 6483 ...
##  $ Y1973       : num [1:33434] 245 NA 6859 NA 6859 ...
##  $ Y1974       : num [1:33434] 263 NA 7359 NA 7359 ...
##  $ Y1975       : num [1:33434] 282 NA 7898 NA 7898 ...
##  $ Y1976       : num [1:33434] 288 NA 8070 NA 8070 ...
##  $ Y1977       : num [1:33434] 281 NA 7865 NA 7865 ...
##  $ Y1978       : num [1:33434] 280 NA 7848 NA 7848 ...
##  $ Y1979       : num [1:33434] 274 NA 7679 NA 7679 ...
##  $ Y1980       : num [1:33434] 275 NA 7710 NA 7710 ...
##  $ Y1981       : num [1:33434] 278 NA 7790 NA 7790 ...
##  $ Y1982       : num [1:33434] 278 NA 7782 NA 7782 ...
##  $ Y1983       : num [1:33434] 263 NA 7354 NA 7354 ...
##  $ Y1984       : num [1:33434] 230 NA 6444 NA 6444 ...
##  $ Y1985       : num [1:33434] 203 NA 5676 NA 5676 ...
##  $ Y1986       : num [1:33434] 160 NA 4487 NA 4487 ...
##  $ Y1987       : num [1:33434] 173 NA 4842 NA 4842 ...
##  $ Y1988       : num [1:33434] 181 NA 5080 NA 5080 ...
##  $ Y1989       : num [1:33434] 180 NA 5028 NA 5028 ...
##  $ Y1990       : num [1:33434] 178 NA 4997 NA 4997 ...
##  $ Y1991       : num [1:33434] 188 NA 5251 NA 5251 ...
##  $ Y1992       : num [1:33434] 190 NA 5313 NA 5313 ...
##  $ Y1993       : num [1:33434] 191 NA 5343 NA 5343 ...
##  $ Y1994       : num [1:33434] 198 NA 5542 NA 5542 ...
##  $ Y1995       : num [1:33434] 211 NA 5912 NA 5912 ...
##  $ Y1996       : num [1:33434] 240 NA 6712 NA 6712 ...
##  $ Y1997       : num [1:33434] 265 NA 7409 NA 7409 ...
##  $ Y1998       : num [1:33434] 283 NA 7937 NA 7937 ...
##  $ Y1999       : num [1:33434] 318 NA 8914 NA 8914 ...
##  $ Y2000       : num [1:33434] 272 NA 7620 NA 7620 ...
##  $ Y2001       : num [1:33434] 225 NA 6311 NA 6311 ...
##  $ Y2002       : num [1:33434] 288 NA 8061 NA 8061 ...
##  $ Y2003       : num [1:33434] 294 NA 8222 NA 8222 ...
##  $ Y2004       : num [1:33434] 286 NA 7997 NA 7997 ...
##  $ Y2005       : num [1:33434] 295 309 8271 8653 8271 ...
##  $ Y2006       : num [1:33434] 301 NA 8423 NA 8423 ...
##  $ Y2007       : num [1:33434] 304 NA 8518 NA 8518 ...
##  $ Y2008       : num [1:33434] 340 NA 9508 NA 9508 ...
##  $ Y2009       : num [1:33434] 346 NA 9678 NA 9678 ...
##  $ Y2010       : num [1:33434] 401 NA 11230 NA 11230 ...
##  $ Y2011       : num [1:33434] 403 NA 11270 NA 11270 ...
##  $ Y2012       : num [1:33434] 397 NA 11114 NA 11114 ...
##  $ Y2013       : num [1:33434] 393 414 11007 11592 11007 ...
##  $ Y2014       : num [1:33434] 398 NA 11152 NA 11152 ...
##  $ Y2015       : num [1:33434] 383 NA 10732 NA 10732 ...
##  $ Y2016       : num [1:33434] 381 NA 10665 NA 10665 ...
##  $ Y2017       : num [1:33434] 371 NA 10396 NA 10396 ...
##  $ Y2018       : num [1:33434] 379 NA 10609 NA 10609 ...
##  $ Y2019       : num [1:33434] 390 NA 10910 NA 10910 ...
##  - attr(*, &quot;spec&quot;)=
##   .. cols(
##   ..   `Area Code` = col_double(),
##   ..   Area = col_character(),
##   ..   `Item Code` = col_double(),
##   ..   Item = col_character(),
##   ..   `Element Code` = col_double(),
##   ..   Element = col_character(),
##   ..   `Source Code` = col_double(),
##   ..   Source = col_character(),
##   ..   Unit = col_character(),
##   ..   Y1961 = col_double(),
##   ..   Y1962 = col_double(),
##   ..   Y1963 = col_double(),
##   ..   Y1964 = col_double(),
##   ..   Y1965 = col_double(),
##   ..   Y1966 = col_double(),
##   ..   Y1967 = col_double(),
##   ..   Y1968 = col_double(),
##   ..   Y1969 = col_double(),
##   ..   Y1970 = col_double(),
##   ..   Y1971 = col_double(),
##   ..   Y1972 = col_double(),
##   ..   Y1973 = col_double(),
##   ..   Y1974 = col_double(),
##   ..   Y1975 = col_double(),
##   ..   Y1976 = col_double(),
##   ..   Y1977 = col_double(),
##   ..   Y1978 = col_double(),
##   ..   Y1979 = col_double(),
##   ..   Y1980 = col_double(),
##   ..   Y1981 = col_double(),
##   ..   Y1982 = col_double(),
##   ..   Y1983 = col_double(),
##   ..   Y1984 = col_double(),
##   ..   Y1985 = col_double(),
##   ..   Y1986 = col_double(),
##   ..   Y1987 = col_double(),
##   ..   Y1988 = col_double(),
##   ..   Y1989 = col_double(),
##   ..   Y1990 = col_double(),
##   ..   Y1991 = col_double(),
##   ..   Y1992 = col_double(),
##   ..   Y1993 = col_double(),
##   ..   Y1994 = col_double(),
##   ..   Y1995 = col_double(),
##   ..   Y1996 = col_double(),
##   ..   Y1997 = col_double(),
##   ..   Y1998 = col_double(),
##   ..   Y1999 = col_double(),
##   ..   Y2000 = col_double(),
##   ..   Y2001 = col_double(),
##   ..   Y2002 = col_double(),
##   ..   Y2003 = col_double(),
##   ..   Y2004 = col_double(),
##   ..   Y2005 = col_double(),
##   ..   Y2006 = col_double(),
##   ..   Y2007 = col_double(),
##   ..   Y2008 = col_double(),
##   ..   Y2009 = col_double(),
##   ..   Y2010 = col_double(),
##   ..   Y2011 = col_double(),
##   ..   Y2012 = col_double(),
##   ..   Y2013 = col_double(),
##   ..   Y2014 = col_double(),
##   ..   Y2015 = col_double(),
##   ..   Y2016 = col_double(),
##   ..   Y2017 = col_double(),
##   ..   Y2018 = col_double(),
##   ..   Y2019 = col_double()
##   .. )
##  - attr(*, &quot;problems&quot;)=&lt;externalptr&gt;</code></pre>
<pre class="r"><code>Agri2 &lt;- 
  Agri %&gt;% filter(Area == &quot;United States of America&quot;) %&gt;%
  filter(str_detect(Element, &quot;CO2eq&quot;)) %&gt;%
  mutate(unit = &quot;tonnes&quot;) %&gt;%
  select(Area, Item, Element,unit, Y2015:Y2019) %&gt;%
  pivot_longer(c(Y2015:Y2019),
               names_to = &quot;Year&quot;, values_to = &quot;emission&quot;) %&gt;%
  drop_na()
Agri2</code></pre>
<pre><code>## # A tibble: 445 × 6
##    Area                     Item                 Element    unit  Year  emission
##    &lt;chr&gt;                    &lt;chr&gt;                &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt;    &lt;dbl&gt;
##  1 United States of America Enteric Fermentation Emissions… tonn… Y2015  161470.
##  2 United States of America Enteric Fermentation Emissions… tonn… Y2016  165788.
##  3 United States of America Enteric Fermentation Emissions… tonn… Y2017  168569.
##  4 United States of America Enteric Fermentation Emissions… tonn… Y2018  169820.
##  5 United States of America Enteric Fermentation Emissions… tonn… Y2019  170583.
##  6 United States of America Enteric Fermentation Emissions… tonn… Y2015  186913.
##  7 United States of America Enteric Fermentation Emissions… tonn… Y2016  192910.
##  8 United States of America Enteric Fermentation Emissions… tonn… Y2017  196904.
##  9 United States of America Enteric Fermentation Emissions… tonn… Y2018  199334.
## 10 United States of America Enteric Fermentation Emissions… tonn… Y2019  199986.
## # … with 435 more rows</code></pre>
<p>This FOODSTAT dataset explores the relationship between the CO2 emission and agriculture/ forest ground.
After exploring the data, I first decided to filter out the region and time. We focus on the data of the USA
from 2015 to 2019 for all three datasets. And then I filtered the emission element, which is CO2 emission.
In order to make three datasets uniform, I added a new column for unit “tonnes” by using mutate() , so that
it matches to the other two datasets. Then, I changed the values of the emission by multiplying 1000 to convert it
to tonnes. I selected the columns I need by select(). Because the original dataset is wide. So I change the format
of the dataset by using pivit_longer. So that the year becomes the rows and the whole table looks clear and concise.</p>
