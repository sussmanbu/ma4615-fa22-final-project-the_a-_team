---
title: blogpost6
author: The_A+_team
date: '2022-11-16'
slug: []
categories: []
tags: []
description: ~
toc: yes
authors: []
series: []
lastmod: '2022-11-16T09:20:28-05:00'
featuredVideo: ~
featuredImage: ~
---


<div id="TOC">

</div>

<pre class="r"><code>library(dplyr)</code></pre>
<pre><code>## 
## Attaching package: &#39;dplyr&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:stats&#39;:
## 
##     filter, lag</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     intersect, setdiff, setequal, union</code></pre>
<pre class="r"><code>library(tidyverse)</code></pre>
<pre><code>## ── Attaching packages
## ───────────────────────────────────────
## tidyverse 1.3.2 ──</code></pre>
<pre><code>## ✔ ggplot2 3.3.6     ✔ purrr   0.3.4
## ✔ tibble  3.1.6     ✔ stringr 1.4.0
## ✔ tidyr   1.2.0     ✔ forcats 0.5.2
## ✔ readr   2.1.2     
## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
## ✖ dplyr::filter() masks stats::filter()
## ✖ dplyr::lag()    masks stats::lag()</code></pre>
<pre class="r"><code>Agri &lt;- read_csv(&quot;FAOSTAT.csv&quot;, show_col_types = FALSE) 
Agri2 &lt;- 
  Agri %&gt;% filter(Area == &quot;United States of America&quot;) %&gt;%
  filter(str_detect(Element, &quot;CO2eq&quot;)) %&gt;%
  mutate(unit = &quot;tonnes&quot;) %&gt;%
  select(Area, Item, Element, unit, Y2015:Y2019) %&gt;%
  pivot_longer(c(Y2015:Y2019),
               names_to = &quot;year&quot;, values_to = &quot;emission&quot;) %&gt;%
  mutate(total = emission * 1000) %&gt;%
  select(-emission) %&gt;%
  arrange(order(year)) %&gt;%
  group_by(year, Item, Area) %&gt;%
  summarize(sum_emission = sum(total, na.rm = TRUE, count = n()), Element) %&gt;%
  rename(Country = Area, Emission = sum_emission, source_of_emissions = Item, `Element(tonnes)` = Element) %&gt;%
  mutate(year = gsub(&quot;Y&quot;, &quot;&quot;, year)) %&gt;%
  select(-Country) %&gt;%
  ungroup()</code></pre>
<pre><code>## `summarise()` has grouped output by &#39;year&#39;, &#39;Item&#39;, &#39;Area&#39;. You can override
## using the `.groups` argument.
## Adding missing grouping variables: `Country`</code></pre>
<pre class="r"><code>Agri2</code></pre>
<pre><code>## # A tibble: 445 × 5
##    Country                  year  source_of_emissio… Emission `Element(tonnes)` 
##    &lt;chr&gt;                    &lt;chr&gt; &lt;chr&gt;                 &lt;dbl&gt; &lt;chr&gt;             
##  1 United States of America 2015  AFOLU                4.47e8 Emissions (CO2eq)…
##  2 United States of America 2015  AFOLU                4.47e8 Emissions (CO2eq)…
##  3 United States of America 2015  AFOLU                4.47e8 Emissions (CO2eq)…
##  4 United States of America 2015  Agricultural Soils   9.09e8 Emissions (CO2eq)…
##  5 United States of America 2015  Agricultural Soils   9.09e8 Emissions (CO2eq)…
##  6 United States of America 2015  Agricultural Soils   9.09e8 Emissions (CO2eq)…
##  7 United States of America 2015  Agricultural Soils   9.09e8 Emissions (CO2eq)…
##  8 United States of America 2015  Burning - Crop re…   9.06e6 Emissions (CO2eq)…
##  9 United States of America 2015  Burning - Crop re…   9.06e6 Emissions (CO2eq)…
## 10 United States of America 2015  Burning - Crop re…   9.06e6 Emissions (CO2eq)…
## # … with 435 more rows</code></pre>
<pre class="r"><code>library(dplyr)
library(tidyverse)
air1 &lt;- read_csv(&quot;AIRTRANS_CO2.csv&quot;, show_col_types = FALSE) %&gt;% 
  filter(LOCATION == &quot;USA&quot;, values_drop_na = TRUE) %&gt;% 
  arrange(order(Time)) %&gt;% 
  select(-POLLUTANT, -MEASURE, -FLIGHT, -FREQUENCY, -SOURCE, -SEASONALITY, -TIME, -`Flag Codes`, -Flags, -Pollutant, -LOCATION) %&gt;% 
  filter(Time &gt; 2014 &amp; Time &lt; 2020) %&gt;% 
  rename(flight_type = `Flight type`, source_of_emissions = `Source of emissions`, Year = Time, Emission = Value, `Element(tonnes)` = Measure) %&gt;%
  rename(year = Year) %&gt;%
  select(-Frequency, -Seasonality) %&gt;%
  select(Country, year, source_of_emissions, Emission, `Element(tonnes)`) %&gt;%
  ungroup() 

air1</code></pre>
<pre><code>## # A tibble: 180 × 5
##    Country       year  source_of_emissions            Emission `Element(tonnes)`
##    &lt;chr&gt;         &lt;chr&gt; &lt;chr&gt;                             &lt;dbl&gt; &lt;chr&gt;            
##  1 United States 2015  &quot;\&quot;(A) - Domestic flight in …    1.31e8 tonnes of CO2-eq…
##  2 United States 2015  &quot;\&quot;(E) - International fligh…    5.06e7 tonnes of CO2-eq…
##  3 United States 2015  &quot;Bridging item - Residents a…    4.95e7 tonnes of CO2-eq…
##  4 United States 2015  &quot;\&quot;(A) - Domestic flight in …    1.04e8 tonnes of CO2-eq…
##  5 United States 2015  &quot;\&quot;(E) - International fligh…    2.37e7 tonnes of CO2-eq…
##  6 United States 2015  &quot;Bridging item - Residents a…    4.81e7 tonnes of CO2-eq…
##  7 United States 2015  &quot;\&quot;(A) - Domestic flight in …    8.04e5 tonnes of CO2-eq…
##  8 United States 2015  &quot;\&quot;(E) - International fligh…    3.05e5 tonnes of CO2-eq…
##  9 United States 2015  &quot;Bridging item - Residents a…    1.47e6 tonnes of CO2-eq…
## 10 United States 2016  &quot;\&quot;(A) - Domestic flight in …    1.43e8 tonnes of CO2-eq…
## # … with 170 more rows</code></pre>
<pre class="r"><code>Agri_air &lt;- rbind(Agri2, air1)</code></pre>
<pre class="r"><code>vehi &lt;- read_csv(&quot;Vehicle.csv&quot;, show_col_types = FALSE, skip = 1)</code></pre>
<pre><code>## New names:
## • `` -&gt; `...1`</code></pre>
<pre class="r"><code>vehi1 &lt;- vehi %&gt;%
  filter(!row_number() %in% c(1,2,3,23,24,27:95)) %&gt;%
  rename(source_of_emissions = ...1) %&gt;%
  select(source_of_emissions, &quot;2015&quot;:&quot;2019&quot;) %&gt;%
  pivot_longer(c(&quot;2015&quot;:&quot;2019&quot;), names_to = &quot;year&quot;)%&gt;%
  arrange(order(&quot;year&quot;)) 

vehi1</code></pre>
<pre><code>## # A tibble: 110 × 3
##    source_of_emissions                     year  value      
##    &lt;chr&gt;                                   &lt;chr&gt; &lt;chr&gt;      
##  1 Highway, total (registered vehicles)    2015  263,610,219
##  2 Highway, total (registered vehicles)    2016  268,799,083
##  3 Highway, total (registered vehicles)    2017  272,480,899
##  4 Highway, total (registered vehicles)    2018  273,602,100
##  5 Highway, total (registered vehicles)    2019  276,491,174
##  6 Light duty vehicle, short wheel basec,d 2015  189,618,308
##  7 Light duty vehicle, short wheel basec,d 2016  192,774,508
##  8 Light duty vehicle, short wheel basec,d 2017  193,672,370
##  9 Light duty vehicle, short wheel basec,d 2018  192,856,211
## 10 Light duty vehicle, short wheel basec,d 2019  194,348,815
## # … with 100 more rows</code></pre>
<pre class="r"><code>Agri_air_car &lt;- left_join(Agri_air, vehi1, by = &quot;year&quot;)
Agri_air_car</code></pre>
<pre><code>## # A tibble: 13,750 × 7
##    Country   year  source_of_emissi… Emission `Element(tonnes… source_of_emissi…
##    &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt;                &lt;dbl&gt; &lt;chr&gt;            &lt;chr&gt;            
##  1 United S… 2015  AFOLU               4.47e8 Emissions (CO2e… Highway, total (…
##  2 United S… 2015  AFOLU               4.47e8 Emissions (CO2e… Light duty vehic…
##  3 United S… 2015  AFOLU               4.47e8 Emissions (CO2e… Motorcycled      
##  4 United S… 2015  AFOLU               4.47e8 Emissions (CO2e… Light duty vehic…
##  5 United S… 2015  AFOLU               4.47e8 Emissions (CO2e… Truck, single-un…
##  6 United S… 2015  AFOLU               4.47e8 Emissions (CO2e… Truck, combinati…
##  7 United S… 2015  AFOLU               4.47e8 Emissions (CO2e… Bus              
##  8 United S… 2015  AFOLU               4.47e8 Emissions (CO2e… Transitg         
##  9 United S… 2015  AFOLU               4.47e8 Emissions (CO2e… Motor bush       
## 10 United S… 2015  AFOLU               4.47e8 Emissions (CO2e… Light rail carsi 
## # … with 13,740 more rows, and 1 more variable: value &lt;chr&gt;</code></pre>
<pre class="r"><code>save(Agri2, air1, vehi1, file = &quot;Agri_air_car.RData&quot;)</code></pre>
